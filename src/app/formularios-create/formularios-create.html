<form [formGroup]="form" (ngSubmit)="enviar()">

    <h2>Criar Questionário</h2>
  
    <label>Título:</label>
    <input type="text" formControlName="titulo">
  
    <button type="button" (click)="addPergunta()">+ Adicionar Pergunta</button>
    <hr>
  
    <div formArrayName="perguntas">
  
      <div *ngFor="let p of perguntas.controls; let i=index" [formGroupName]="i" class="card">
  
        <h3>Pergunta {{i+1}}</h3>
  
        <label>Descrição:</label>
        <input type="text" formControlName="descricao">
  
        <label>Tipo:</label>
        <select formControlName="tipoPergunta">
          <option *ngFor="let t of tipos" [value]="t.id">{{t.label}}</option>
        </select>
  
        <!-- Campos de opções -->
        <div *ngIf="p.value.tipoPergunta == 2 || p.value.tipoPergunta == 4 || p.value.tipoPergunta == 5">
  
          <h4>Opções:</h4>
          <div formArrayName="opcoes">
            <button type="button" (click)="addOpcao(i)">+ Opção</button>
  
            <div *ngFor="let op of getOpcoes(i).controls; let j=index">
              <input [formControlName]="j" placeholder="Opção">
            </div>
          </div>
        </div>
  
        <!-- Campos de nota -->
        <div *ngIf="p.value.tipoPergunta == 3" style="margin-top:10px">
          <label>Min:</label>
          <input type="number" formControlName="notaMin">
  
          <label>Max:</label>
          <input type="number" formControlName="notaMax">
        </div>
  
        <hr>
      </div>
  
    </div>
  
    <button type="submit">Salvar Questionário</button>
  
    <p *ngIf="erro" style="color:red">{{erro}}</p>
    <p *ngIf="sucesso" style="color:green">{{sucesso}}</p>
  
  </form>
  